<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <title>Zzr blog</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!-- build:css /public/css/combined.css-->
    <link rel="stylesheet" href="/public/css/normalize.css" type="text/css">
    <link rel="stylesheet" href="/public/css/main.css" type="text/css">
    <link rel="stylesheet" href="/public/css/unit.css" type="text/css">
    <link rel="stylesheet" href="/public/css/markdown.css" type="text/css">
    <!-- endbuild-->
  </head>
  <body>
    <!--if lte IE 8
    p.browser-upgrade
      | &#x60A8;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7248;&#x672C;&#x90FD;&#x8001;&#x7684;&#x6389;&#x7259;&#x5566;&#xFF0C;&#x8BF7;&#x5230;
      a(href='http://browsehappy.com') &#x8FD9;&#x91CC;
      | &#x66F4;&#x65B0;&#xFF0C;&#x4EE5;&#x83B7;&#x53D6;&#x6700;&#x4F73;&#x4F53;&#x9A8C;
    -->
    <section class="sidebar">
      <div class="header"><img src="/public/img/sidebar-brand.jpg" alt="brand" class="header-brand">
        <h1 class="header-name">Zzr&#x7684;&#x535A;&#x5BA2;</h1>
      </div>
      <nav class="main">
        <ul>
          <li class="active"><a href="/" title="博客首页"><i class="iconfont">&#xE600;</i><span>home</span></a></li>
          <li><a href="/demos/demo" title="小的demo"><i class="iconfont">&#xE603;</i><span>demo</span></a></li>
          <li><a href="#" title="关于"><i class="iconfont">&#xE612;</i><span>about</span></a></li>
          <li><a href="https://github.com/Zhangzirui/" title="我的github"><i class="iconfont">&#xE611;</i><span>github</span></a></li>
        </ul>
      </nav>
    </section>
    <div class="container">
      <div class="main">
        <article class="markdown"></p>

<h2>解决NodeJS中Cannot find module的问题</h2>

<p>最近开始学习NodeJS，在最最基本的require(&#39;module&#39;)的时候就遇到了问题，本来以为上网一查就可以分分钟解决，没想到花了自己一上午的时间。其实过程很简单，自己总结一下。</p>

<h3>npm全局安装地址</h3>

<p>我是在<code>require(&#39;cheerio&#39;)</code>的时候系统报的错，由于安装的时候是全局安装，所以上网知道了怎么查全局安装的地址,在cmd里面敲下面的代码就可以了。</p>

<pre><code>npm root -g
// 显示的是 C:\Users\Administrator\AppData\Roaming\npm</code></pre>

<p>然后是查一查require搜索模块时的搜索路径（在node环境下）</p>

<p><img alt="" src="http://cezrh.img48.wal8.com/img48/544629_20160502104557/147402798177.png"/></p>

<p>发现require查询模块路径和npm全局安装地址不一样，这个就是Cannot find module的原因。</p>

<h3>解决办法</h3>

<p>最开始的时候，我以为按照<code>global.module.paths</code>给出的路径里面的地址，我照着建一个一样地址文件夹，然后把模块安装到里面就可以了，结果发现没啥用，原因我也不知道。</p>

<p>最后还是上网找到了其他的办法，就是设置NODE_PATH环境变量，值设置为npm全局安装地址。</p>

<p><strong>注意</strong>：不是在环境变量path里面编辑哦，是自己新建一个NODE_PATH环境变量。然后记住：注销或重启后生效。（我就是在这个坑里面躺了好久，以为设置环境变量不起作用）</p>

<h3>更改npm全局安装地址</h3>

<p>如果想改变自己的npm全局安装地址的话，可以去你自己nodejs文件夹下面的\node_modules\npm里面找到npmrc文件，更改里面的prefix,比如：</p>

<pre><code>prefix=E:\xxx\xxx 	//路径地址不需要加引号</code></pre>

<p>(完)</p>
          <div class="pay">
            <div class="pay-content">
              <p>如果这篇文章对你很有帮助，你可以犒劳一下WO</p><a class="pay-btn">打赏</a>
            </div>
          </div>
        </article>
      </div>
      <div class="elevator">
        <ul>
          <li id="goTop" title="返回顶部"><i class="iconfont">&#xE605;</i></li>
        </ul>
      </div>
      <footer>
        <p class="copyright">Copyright &copy; Zhangzirui</p>
      </footer>
    </div>
    <script type="text/javascript" src="/public/js/require.js" data-main="/public/js/main.js"></script>
  </body>
</html>